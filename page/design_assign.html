<!-- 页面外套 -->
<div class="page-wrapper" id="design_assign">

    <!-- 数据网格 -->
    <div class="datagrid datagrid-striped" id="design_assign_datagrid">

        <!-- 工具条组 -->
        <div class="tool-group">
            <div class="tool-search">
                <form id="formID" class="formular" method="post" action="">
                <div class="im-label">
                    <div class="input-group">
                        <select class="form-control" id="design_assign_tool_keys">
                            <option value="1">项目名称</option>
                            <option value="2">编号</option>
                            <option value="3">业务员</option>
                        </select>
                        <span class="input-group-addon fix-border fix-padding"></span>
                        <input type="text" class="form-control" id="design_assign_tool_search">
                    </div>
                </div>
                <!---->  
				<label><span>房源状态：</span><select class="form-control" id="design_assign_tool_select1"><!--JS推进--></select></label>
                <label><button type='button' class="btn btn-primary" id="design_assign_search_btn"><i class="icon icon-search"></i> 查询</button></label>
                <div class="clearfix"></div>
                </form>
            </div>
        </div>
        <!-- tool-group -->

        <div class="datagrid-container"></div>
        <ul class="pager btn-mini" data-elements="prev,pages,next"></ul>
    </div>
    <!-- datagrid -->


</div>
<!-- page-wrapper -->

<script>
$(function(){
//变量声明-----------------------------------------------------------------------------------------------
    var 
    design_assign                     = $("#design_assign"),                      //页面ID
    design_assign_datagrid            = $("#design_assign_datagrid"),             //数据表格
    //搜索
    design_assign_tool_keys           = $("#design_assign_tool_keys"),            //搜索类别
    design_assign_tool_search         = $("#design_assign_tool_search"),          //搜索字段
	 design_assign_tool_select1		  = $("#design_assign_tool_select1"), 		      //下拉选项
    design_assign_search_btn          = $("#design_assign_search_btn"),           //搜索按钮
    // 输入框验证
    submit                            =$("#submit");

    //接口对象-----------------------------------------------------------------------------------------------
    if( window.STATE == "local" ){

        //本地接口
        var design_assign_api = {
            datagrid            : LOCAL + "Test/test_datagrid.json",                                  //数据表格
            datagrid_filelist   : LOCAL + "Test/Business/customer_filelist.json",                     //客户附件表格
            datagrid_record     : LOCAL + "Test/test_datagrid.json",                                  //操作记录表格
            select              : LOCAL + "Test/test_select.json",                                    //下拉选择
            modal_show          : LOCAL + "Test/Business/customer_edit.json",                         //查看盒子
            topic               : LOCAL + "Test/Business/provider_topic.json",                        //日志查看
        }

    } else if ( window.STATE == "route" ){
    }

    //数据表格-----------------------------------------------------------------------------------------------
    design_assign_datagrid.datagrid({
        height      : zui_datagrid_height(design_assign_datagrid),
        sortable    : false,
        cache       : false,
        showRowIndex: true,
        checkable   : false,
        checkByClickRow:false,
        selectable  : false,
        configs     : {
            R0:{className:"text-center"},
            C1:{className:"cell-hidden"}
        },
        states      : {
            pager           : {
                page        : 1,
                recPerPage  : window.REC_PER_PAGE,
            }
        },
        dataSource : {
            cols   : [
                {name:"username",label:"项目编号",width:100},
                {name:"text8",   label:"项目名称",width:150,html:true,
                    valueOperator : {
                        getter : function(dataValue,cell){
                            return `<a class="design_assign_show_btn" rowIndex="${cell.rowIndex}">${dataValue}</a>`;
                        }
                    }
                },
                {name:"name",   label:"联系人1",  width:100},
                {name:"tex10",  label:"装修地址",    width:150},
                {name:"name",   label:"信息员",      width:100},
                {name:"name",   label:"业务员",      width:100},
                {name:"text6",   label:"房源状态",      width:100},
                {name:"date",   label:"提单时间",      width:100},
                {name:"text6",   label:"状态",      width:100}
            ],
            remote : function(){
                return {
                    url     : design_assign_api.datagrid,
                    type    : "POST",
                    dataType: "json",
                }
            }
        }
    });
    //下拉选项-----------------------------------------------------------------------------------------------
	$.ajax({
	    url     : design_assign_api.select,
	    type    : "post",
	    dataType: "json",
	    data    : {},
	    success : function(data){
	        if( data.status>0 ){
	            var data = data.data;
	            var option = "<option value='0'>全部</option>";
	            for(var i=0;i<data.length;i++){
	                option += "<option value='"+data[i].id+"'>"+data[i].name+"</option>"
	            }
				design_assign_tool_select1.html(option);   
	        }
	    }
	});
    //  搜索按钮
        design_assign_search_btn.click(function(){
        //字段整理
        var keyword
        = "?sid="    + design_assign_tool_keys.val()
        + "&search=" + design_assign_tool_search.val()
		+ "&select1=" +design_assign_tool_select1.val();
		

        //GET提交
        zui_datagrid_render(design_assign_datagrid_obj,design_assign_api.datagrid+keyword);

    });


   
    
});//预加载结尾
</script>