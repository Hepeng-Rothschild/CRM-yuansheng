<!-- 页面外套 -->
<div class="page-wrapper" id="design_failure">

	<!-- 数据网格 -->
	<div class="datagrid datagrid-striped" id="design_failure_datagrid">
		<!-- 工具条组 -->
		<div class="tool-group">
			<div class="tool-search">
				<div class="im-label">
					<div class="input-group">
						<select class="form-control" id="design_failure_tool_keys">
							<option value="1">项目编号</option>
							<option value="2">项目名称</option>
							<option value="3">设计师</option>
						</select>
						<span class="input-group-addon fix-border fix-padding"></span>
						<input type="text" class="form-control" id="design_failure_tool_search">

					</div>
				</div>
				<label>
					<span>项目状态：</span>
					<select class="form-control" id="design_failure_tool_select1">
						<option value="0">全部</option>
						<option value="1">未签申请中</option>
						<option value="2">不准申请中</option>
					</select>
				</label>
				<label>
					<span>未签理由：</span>
					<select class="form-control" id="design_failure_tool_select2">
						<option value="0">全部</option>
						<option value="1">未签</option>
						<option value="2">客因未签</option>
					</select>
				</label>
				<label><button class="btn btn-primary" id="design_failure_query_btn">查询</button></label>
				<div class="clearfix"></div>
	</div>
		</div>
		<!-- tool-group -->
		 <div>
		      <div class="datagrid-container"></div>
		      <ul class="pager btn-mini" data-elements="prev,pages,next"></ul>
	     </div>
	<!-- datagrid -->
	
	

</div>
<!-- page-wrapper -->
<script>
	$(function() {
		//变量声明-----------------------------------------------------------------------------------------------
		var
				design_failure = $("#design_failure"), //页面ID
				design_failure_datagrid = $("#design_failure_datagrid"), //数据表格
				//搜索
				design_failure_tool_keys = $("#design_failure_tool_keys"), //搜索类别
				design_failure_tool_search = $("#design_failure_tool_search"), //搜索字段
				design_failure_tool_select1 = $("#design_failure_tool_select1"), //下拉选择1
				design_failure_tool_select2 = $("#design_failure_tool_select2"), //下拉选择1
				design_failure_query_btn     = $("#design_failure_query_btn"), //查找按钮
		//接口对象-----------------------------------------------------------------------------------------------
		if (window.STATE == "local") {
			//本地接口
			var design_failure_api = {
				datagrid: LOCAL + "Test/test_datagrid.json", //数据表格
				datagrid_filelist: LOCAL + "Test/Business/customer_filelist.json", //项目附件表格
				datagrid_record: LOCAL + "Test/test_datagrid.json", //操作记录表格
				select: LOCAL + "Test/test_select.json", //下拉选择
				select_level: LOCAL + "Test/Design/admin_level.json", //下拉选择(等级)
				modal_show: LOCAL + "Test/Business/customer_edit.json", //查看盒子
				topic: LOCAL + "Test/Business/provider_topic.json", //日志查看
				design: LOCAL + "Test/Design/admin_design.json", //日志查看
			}


		} else if (window.STATE == "route") {}

		//数据表格-----------------------------------------------------------------------------------------------
		design_failure_datagrid.datagrid({
			height: zui_datagrid_height(design_failure_datagrid),
			sortable: false,
			cache: false,
			showRowIndex: true,
			checkable: false,
			checkByClickRow: false,
			selectable: false,
			configs: {
				R0: {
					className: "text-center"
				},
				C1: {
					className: "cell-hidden"
				}
			},
			states: {
				pager: {
					page: 1,
					recPerPage: window.REC_PER_PAGE,
				}
			},
			dataSource: {
				cols: [{name: "id",label: "ID",width: 49},
					{name: "username",label: "项目编号",width: 100},
					{name: "text8",label: "项目名称",width: 150,
					html: true,
						valueOperator: {
							getter: function(dataValue, cell) {
								return `<a class="design_failure_show_btn" rowIndex="${cell.rowIndex}">${dataValue}</a>`;
							}
						}
					},
					{name: "name",label: "联系人1",width: 100},
					{name: "tex10",label: "装修地址",width: 150},
					{name: "name",label: "信息员",width: 100},
					{name: "name",label: "业务师",width: 100},
					{name: "name",label: "主案设计师",width: 100},
					{name: "name",label: "房源状态",width: 100},
					{name: "text8",label: "项目状态",width: 150}
					
				],
				remote: function() {
					return {
						url: design_failure_api.datagrid,
						type: "POST",
						dataType: "json",
					}
				}
			}
		});
		//搜索按钮-----------------------------------------------------------------------------------------------
		design_failure_query_btn.click(function() {

			//字段整理
			var keyword = "?sid=" + design_failure_tool_keys.val() +
					"&search=" + design_failure_tool_search.val() +
					"&state=" + design_failure_tool_select1.val()+
					"&state2=" + design_failure_tool_select2.val()
					
			//GET提交
			zui_datagrid_render(design_failure_datagrid_obj, design_failure_api.datagrid + keyword);

		});		
	}); //预加载结尾
</script>

<style>
	#design_failure .tool-group input[readonly] {
		width: 67px !important;
	}
</style>
