<!-- 页面外套 -->
<div class="page-wrapper" id="business_customer_failure">

	<!-- 数据网格 -->
	<div class="datagrid datagrid-striped" id="business_customer_failure_datagrid">

		<!-- 工具条组 -->
		<div class="tool-group">
			<div class="tool-search">
				<div class="im-label">
					<div class="input-group">
						<select class="form-control" id="business_customer_failure_tool_keys">
							<option value="1">项目编号</option>
							<option value="2">项目名称</option>
							<option value="3">工号</option>
							<option value="4">业务员</option>
						</select>
						<span class="input-group-addon fix-border fix-padding"></span>
						<input type="text" class="form-control" id="business_customer_failure_tool_search">
					</div>
				</div>
				<label><button class="btn btn-primary" id="business_customer_failure_search_btn"><i class="icon icon-search"></i> 搜索</button></label>
				<div class="clearfix"></div>
			</div>
		</div>
		<!-- tool-group -->

		<div class="datagrid-container"></div>
		<ul class="pager btn-mini" data-elements="prev,pages,next"></ul>
	</div>
	<!-- datagrid -->

</div>
<!-- page-wrapper -->

<script>
$(function(){
   
	//变量声明-----------------------------------------------------------------------------------------------
	var 
	business_customer_failure 				= $("#business_customer_failure"), 				//页面ID
	business_customer_failure_datagrid 		= $("#business_customer_failure_datagrid"), 	//数据表格
	//搜索
	business_customer_failure_tool_keys 	= $("#business_customer_failure_tool_keys"), 	//搜索类别
	business_customer_failure_tool_search	= $("#business_customer_failure_tool_search"), 	//搜索字段
	business_customer_failure_search_btn 	= $("#business_customer_failure_search_btn"); 	//搜索按钮
	
	//接口对象-----------------------------------------------------------------------------------------------
	if( window.STATE == "local" ){

		//本地接口
		var business_customer_failure_api = {
			datagrid 	: LOCAL + "Test/test_datagrid.json",								//数据表格
		}

	} else if ( window.STATE == "route" ){
	}

	//数据表格-----------------------------------------------------------------------------------------------
	business_customer_failure_datagrid.datagrid({
		height      : zui_datagrid_height(business_customer_failure_datagrid),
		sortable    : false,
		cache       : false,
		showRowIndex: true,
		configs     : {
			R0:{className:"text-center"},
			C1:{className:"cell-hidden"}
		},
		states      : {
			pager           : {
				page        : 1,
				recPerPage  : window.REC_PER_PAGE,
			}
		},
		dataSource : {
			cols   : [
                {name:"id",      label:"ID",      width:49},
                {name:"username",label:"项目编号",width:100,html:true,
                    valueOperator : {
                        getter : function(dataValue,cell){
                            return `<a rowIndex="${cell.rowIndex}" onclick=template_page_open('detail_customer',$(this))>${dataValue}</a>`;
                        }
                    }
                },
                {name:"text8",   label:"项目名称",    width:150},
                {name:"name",    label:"联系人",      width:80 },
                {name:"name",    label:"信息员",      width:80 },
                {name:"name",    label:"业务员",      width:80 },
                {name:"name",    label:"设计师",      width:80 },
                {name:"tex10",   label:"项目状态",    width:150},
                {name:"text2",   label:"房源状态",    width:80 },
                {name:"tex10",   label:"装修地址",    width:150},               
			],
			remote : function(){
				return {
					url     : business_customer_failure_api.datagrid,
					type    : "POST",
					dataType: "json",
				}
			}
		}
	});

	//变量声明-----------------------------------------------------------------------------------------------
	var business_customer_failure_datagrid_obj = business_customer_failure_datagrid.data("zui.datagrid"); //表格对象

	//搜索按钮-----------------------------------------------------------------------------------------------
	business_customer_failure_search_btn.click(function(){

		//字段整理
		var keyword
		= "?sid="    + business_customer_failure_tool_keys.val()
		+ "&search=" + business_customer_failure_tool_search.val();

		//GET提交
		zui_datagrid_render(business_customer_failure_datagrid_obj,business_customer_failure_api.datagrid+keyword);

	});
	
});//预加载结尾
</script>